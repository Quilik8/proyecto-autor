# Manual del Proyecto A.U.T.O.R.
**Última actualización:** [Fecha de hoy]

---

## Parte 1: La Visión

### Filosofía y Propósito Central

El proyecto se llama **A.U.T.O.R.**, un acrónimo que define nuestros pilares:

-   **A**utonomía: El creador tiene control total sobre su obra y cómo la monetiza.
-   **U**niversal: Accesible para cualquier creador de cualquier parte del mundo. Empezamos en español, pero con visión global.
-   **T**alento: La plataforma está diseñada para recompensar el talento y el esfuerzo, no solo la popularidad previa.
-   **O**bras: El foco es la calidad y la diversidad de las obras, desde novelas seriadas hasta ensayos, y en el futuro, otros formatos.
-   **R**egalías: Un sistema de monetización transparente y justo es el núcleo del proyecto.

**El propósito** es simple: crear el "YouTube/Twitch de los escritores". Un lugar donde cualquiera pueda empezar a construir una carrera escribiendo, con herramientas de monetización y comunidad integradas desde el día uno.

### Visión a Largo Plazo y Fases de Expansión

El proyecto evolucionará en fases, expandiendo el tipo de contenido y las funcionalidades:

1.  **Fase Texto (Actual):** El MVP se centra en la ficción seriada y textos largos. El objetivo es consolidar la comunidad de lectores y escritores.
2.  **Fase Ecosistema ("El Gremio"):**
    *   **Mercado de Talentos:** Crear perfiles verificados para **Editores, Diseñadores, Traductores, etc.**
    *   **Colaboración Integrada:** Permitir a los autores contratar y colaborar con estos profesionales dentro de la plataforma.
    *   **Reparto de Ganancias Automatizado:** Un autor y un diseñador podrían acordar un reparto del 5% para la portada, y la plataforma gestionaría los pagos automáticamente.
    *   **Visión del Gremio Unificado:** El Gremio no será exclusivo de `AUTOR.WRITING`. Está concebido como un ecosistema transversal y compartido. Un autor en `.WRITING` podrá buscar y contratar a un ilustrador de `AUTOR.ART` para una portada, o a un compositor de `AUTOR.AUDIO` para un audiolibro. Los perfiles, reputación y sistema de contratos serán universales, creando una red de colaboración creativa sin precedentes.

3.  **Fase Multimedia:**
    *   **Audio:** Integración para audiolibros y podcasts narrativos.
    *   **Imagen:** Soporte para cómics, novelas ilustradas y galerías de arte conceptual.
    *   **Video:** Alojamiento de book-trailers, entrevistas con autores o cursos.

### Modelo de Negocio y Monetización Detallado

A.U.T.O.R. ofrecerá un conjunto flexible de herramientas de monetización para que el autor elija:

-   **Publicidad (Estilo YouTube):** Anuncios no intrusivos mostrados durante la lectura. Los ingresos se reparten entre la plataforma y el autor.
-   **Suscripción (Estilo Medium/Netflix):** Los lectores pagan una cuota mensual para una experiencia sin anuncios y acceso a contenido premium. Los ingresos de la suscripción se reparten entre los autores cuyas obras leen.
-   **Compra Directa (Paywall Flexible):**
    *   **Comprar la Obra Completa:** Pagar una vez para tener acceso perpetuo y sin anuncios a una historia.
    *   **Pago por Capítulo (Paywall Rodante):** El autor puede decidir que los últimos 1-3 capítulos sean de pago, y se vuelven gratuitos a medida que publica nuevos. Esto incentiva el apoyo de los fans más leales.
-   **Donaciones y Apoyo Directo (Estilo Patreon/Twitch):**
    *   **Donación por Párrafo:** Una "killer feature" donde los lectores pueden dejar una pequeña donación en un párrafo específico que les encantó.
    *   **Metas de Donación:** Los autores pueden establecer metas públicas (ej. "A los $100, publico un capítulo extra") para incentivar el apoyo comunitario.
    *   **Niveles de Mecenazgo:** Donaciones mensuales a cambio de recompensas definidas por el autor (acceso anticipado, menciones, contenido exclusivo).

### Gamificación y Retención de Usuarios

Para hacer la plataforma más atractiva y fomentar la participación:

-   **Para Lectores:** Ganar una "moneda virtual" por leer, entrar diariamente o ver anuncios, que luego pueden usar para donar o desbloquear contenido. Insignias por logros (terminar una saga, ser el primer donante, etc.).
-   **Para Autores:** "Misiones" para guiar su crecimiento ("Publica tu primera historia", "Consigue 10 seguidores") y recompensas por hitos de ingresos o publicación. El reparto de ganancias podría mejorar a medida que el autor crece en la plataforma.

- El objetivo es crear un ciclo de participación gratificante. Los lectores realizan acciones en la plataforma, ganan XP (Puntos de Experiencia) para su "Árbol de Progreso" y Monedas (la divisa virtual de la plataforma) para gastar.

**Acciones que Generan Recompensas (XP y Monedas):**

*   **Lectura Activa:**
- Completar un capítulo.
- Completar una historia completa (bonificación grande).
- Rachas de lectura (leer al menos un capítulo diario/semanal).

*   **Participación Comunitaria:**
- Dejar un comentario en un capítulo.
- Recibir "me gusta" en un comentario propio.
- Escribir una reseña/crítica detallada de una obra.
- Iniciar un hilo de discusión en el foro.
- Participar activamente en hilos del foro.

*   **Apoyo a Creadores:**
- Ser uno de los primeros lectores de un nuevo capítulo.
- Donar a un autor (otorga una bonificación de XP/Monedas - y dependiendo del tipo, cantidad, y reularidad de la donacion darle mas XP/Monedad).

*   **Tareas y Eventos:**
- Completar "misiones" semanales (ej. "Lee 3 capítulos de ciencia ficción").
- Participar en eventos de lectura o concursos.
- Ver anuncios opcionales.

**##Recompensas y Beneficios Desbloqueables##**
Los lectores pueden usar sus Monedas o dinero real para adquirir una variedad de mejoras.

*   **1. Estética y Estatus Social (Comprables con Monedas):**
Estos beneficios se centran en la personalización y la visibilidad dentro de la comunidad.

**Marcos de Avatar:** Bordes decorativos para la foto de perfil que se muestra en los comentarios y el foro.
**Insignias de Perfil:** Emblemas que se pueden exhibir en el perfil para mostrar logros (ej. "Fundador", "Maestro de la Fantasía", "Crítico Consagrado").
**Comentarios Destacados:** Un objeto consumible que permite al lector poner un borde brillante o un fondo de color a uno de sus comentarios para que destaque en la sección.
Títulos de Usuario: Un pequeño texto que aparece debajo de su nombre en el foro (ej. "Lector Voraz", "Teórico de Nebulon").

*   **2. Beneficios Funcionales (Desbloqueables)**
Estos mejoran la experiencia de uso de la plataforma.

**Tokens de Lectura Anticipada:**
Cómo se obtienen: Se pueden comprar en paquetes con Monedas o con dinero real.
Uso: Permiten al lector saltarse el "Paywall Rodante" y leer un capítulo de pago de forma gratuita. Un token por un capítulo.

**Paquetes de Descuento:**
Cómo se obtienen: Comprables con Monedas.
Uso: Ofrecen un % de descuento (ej. 10%) en la próxima compra de una obra completa con dinero real.

*   **3. La Biblioteca: Funciones Gratuitas vs. Premium**
La biblioteca es una herramienta central para todos, pero con una capa "premium" para los usuarios más dedicados.

**Funcionalidad Gratuita (Biblioteca Estándar - para todos los usuarios):**

**Guardar Obras:** Añadir cualquier historia a tu biblioteca personal.
**Seguimiento de Progreso:** La plataforma recuerda automáticamente en qué capítulo y párrafo te quedaste.
**Listas de Lectura Básicas:** Crear listas simples para organizar obras (ej. "Para Leer", "Favoritos").
**Notificaciones:** Recibir alertas cuando un autor que sigues publica un nuevo capítulo.
**Funcionalidad Premium (Biblioteca A.U.T.O.R.+ - desbloqueable):**

*   **Formas de Desbloqueo:**

**Suscripción Mensual:** Acceso mientras la suscripción esté activa.
**Pase Perpetuo (Pago único):** Un pago con dinero real para desbloquear las funciones premium para siempre, o con moneda gratuita pero la cantidad debe ser exhorbitante.
**Pase Temporal (Monedas):** Usar una gran cantidad de Monedas para desbloquear las funciones premium durante un tiempo limitado (ej. 30 días).

*   **Funciones Desbloqueadas:**

**Colecciones Avanzadas:** Crear estanterías visuales y personalizables, con portadas y descripciones propias.
**Estadísticas de Lectura Detalladas:** Gráficos sobre tus hábitos: géneros más leídos, autores favoritos, velocidad de lectura, etc.
**Notas y Resaltados Privados:** La capacidad de resaltar texto dentro de un capítulo y añadir notas privadas que solo tú puedes ver.
**Sincronización Offline (PWA):** Descargar un número limitado de historias para leerlas sin conexión a internet.
**Búsqueda y Filtros Avanzados:** Buscar dentro de tu propia biblioteca por notas, personajes o palabras clave.

Estas recompensas pueden desbloquearse con Pases de Acceso (comprados con una gran cantidad de Monedas o dinero real) o usando Consumibles (objetos de un solo uso comprados con Monedas).

Categoría 1: Acceso a Contenido y Discusión Exclusiva

Acceso a la "Sala de World-Building" del Autor: Un autor puede crear un foro privado temporal para su obra. Solo los poseedores de un "Pase de Mecenas" (obtenido por donación o compra) pueden entrar para discutir teorías, ver arte conceptual inédito y hablar directamente con el creador sobre el lore.

Entrada al "Círculo de Beta-Readers": Un foro exclusivo a nivel de plataforma para los usuarios más dedicados y con mejores reseñas. Para entrar, se requiere una insignia de "Crítico Consagrado" (ganada por XP) y pagar una cuota de Monedas. Los autores pueden publicar aquí capítulos en borrador para recibir feedback de alta calidad.

Acceso a Seminarios del Gremio: Editores, diseñadores o traductores del Gremio pueden organizar charlas o talleres en salas privadas. El acceso se compra con un "Ticket de Seminario" (disponible en la tienda de Monedas).

Categoría 2: Funcionalidades Avanzadas en la Comunidad

Poder de "Fijar Hilo": Un objeto consumible que permite a un usuario fijar su propio hilo de discusión en la parte superior de un foro durante 24 horas. Ideal para teorías importantes o guías creadas por fans.

Creación de Encuestas Avanzadas: La mayoría de usuarios puede crear encuestas simples. Los usuarios con un "Pase Comunitario" pueden crear encuestas con más opciones, lógica condicional o votación ponderada, ideal para debates complejos.

Firma de Perfil Personalizable: Una función premium (desbloqueada con la Biblioteca A.U.T.O.R.+) que permite a los usuarios añadir una firma con imágenes, insignias y enlaces al final de todos sus posts en el foro.

Categoría 3: Influencia y Poder Comunitario

Rol de "Embajador de Género": No se compra, sino que se otorga a los usuarios con más XP en un género específico (ej. "Embajador de la Ciencia Ficción"). Este rol les da un título único y la capacidad de moderar (marcar como inapropiado, sugerir fijar hilos) en los foros de su género.

Voto en Eventos de la Plataforma: Los usuarios con la suscripción A.U.T.O.R.+ o que hayan alcanzado un cierto nivel de XP tienen un voto en decisiones comunitarias, como "¿Cuál debería ser el tema del próximo concurso de escritura?" o "¿Qué autor clásico deberíamos destacar este mes?".

### Contenido Dinámico y Editorial: La Bitácora del Creador

Para expandir A.U.T.O.R. más allá de las obras de formato largo y crear un ecosistema de contenido más rico, se introduce el concepto de **"La Bitácora"**. Esta funcionalidad dota a cada creador (no solo autores, sino también críticos, editores, etc.) de un espacio editorial propio, similar a un blog personal integrado en su perfil.

La Bitácora permite la creación de dos formatos de contenido distintos:

1.  **Apuntes:**
    *   **Propósito:** Contenido corto y de interacción rápida. Ideal para anuncios, ideas fugaces, preguntas a la comunidad, o compartir enlaces.
    *   **Estructura:** Un cuerpo de texto con un límite de caracteres generoso.
    *   **Visualización:** Se muestra de forma completa en el feed de la Bitácora.

2.  **Artículos:**
    *   **Propósito:** Contenido de formato largo, estructurado y de mayor profundidad. Perfecto para críticas, reseñas, columnas de opinión, ensayos o capítulos únicos.
    *   **Estructura:** Requiere un **Título** y un **Cuerpo de texto** sin límite. Opcionalmente, puede incluir una imagen de cabecera.
    *   **Visualización:** En el feed de la Bitácora, se muestra una tarjeta con el título, un extracto y un botón de "Leer más...". Al hacer clic, se abre una página de lectura dedicada y libre de distracciones.

**Beneficios Estratégicos:**

*   **Empodera a todos los Roles:** Le da a un **Crítico** la herramienta adecuada para sus reseñas y a un **Autor** un canal para sus anuncios, todo dentro del mismo sistema.
*   **Aumenta el Valor de la Plataforma:** Atrae y retiene talento más allá de los novelistas, como periodistas, ensayistas y expertos del sector.
*   **Nuevas Vías de Monetización:** La distinción de formato facilita la monetización futura. Un "Artículo" premium de un experto podría ser de pago, mientras que los "Apuntes" pueden recibir propinas o "aplausos".
*   **Mejora la Comunidad:** Centraliza la conversación y el contenido editorial dentro de A.U.T.O.R., creando una experiencia más completa para el lector.

### Flujos de Usuario Clave

**1. Flujo de Nuevo Usuario (Registro y Primera Lectura):**
   - Un usuario llega a `index.html`.
   - Hace clic en "Registrarse" y va a `registro.html`.
   - Rellena el formulario, se crea la cuenta en Supabase y es redirigido a `confirmacion.html`.
   - El usuario va a su email, confirma su cuenta y vuelve a la web.
   - Ahora hace clic en "Iniciar Sesión" y va a `login.html`.
   - Introduce sus credenciales, se valida con Supabase y es redirigido a `index.html` con la sesión iniciada.
   - Navega a `explorar.html`, hace clic en una historia y llega a `historia.html`.
   - Hace clic en un capítulo y finalmente llega a `capitulo.html` para leer.

**2. Flujo de Gestión de Contenido (Autor - Panel de Control):**
   - El autor inicia sesión y navega a su `perfil.html`.
   - La página de perfil ahora actúa como un panel de control, mostrando una lista de todas las historias que ha creado.
   - Al hacer clic en una de sus historias, no es redirigido a la vista pública, sino a una nueva página de gestión: `gestionar-historia.html?id=[ID_DE_LA_HISTORIA]`.
   - En esta página, el autor tiene un centro de mando completo para su obra:
     - Ve los detalles actuales (título, sinopsis) y tiene un botón para editarlos.
     - Ve la lista de todos sus capítulos, con opciones para editarlos o verlos.
     - Utiliza un formulario dedicado para escribir y publicar nuevos capítulos directamente desde este panel.

**3. Flujo de Colaboración (Futuro - para el Gremio):**
   - Un autor busca un "Editor" en la sección del Gremio.
   - Contacta a un editor a través de la mensajería interna.
   - Le envía una propuesta de colaboración (ej. pago fijo o % de regalías).
   - El editor acepta. Ahora ambos ven la obra en sus paneles de control.

   ### Decisiones Arquitectónicas Clave

- **Stack Tecnológico Inicial (Front-End Estático):** Se eligió empezar con HTML, CSS y JavaScript puros (sin frameworks como React o Vue) para construir una base sólida, ligera y fácil de entender, manteniendo los costos en cero.
- **Backend-as-a-Service (BaaS):** Se eligió **Supabase** por las siguientes razones:
    - **Plan Gratuito Generoso:** Cubre todas las necesidades del MVP sin costo alguno.
    - **Base de Datos PostgreSQL:** Es una base de datos relacional estándar y potente, ideal para la estructura de usuarios, historias, capítulos y futuras transacciones.
    - **Autenticación Integrada:** Proporciona un sistema de registro, login y gestión de usuarios seguro y listo para usar, incluyendo la confirmación por email.
    - **Alternativa Open Source:** Ofrece más control y transparencia que otras opciones propietarias.
- **Alojamiento y Despliegue (Futuro):** La estrategia es usar **Netlify** o **Vercel** para el despliegue del front-end, por su integración perfecta con GitHub y sus generosos planes gratuitos.

- **Sistema de Ejecución por Página (Front-End):** Para optimizar la carga y evitar ejecutar código innecesario, se implementó un sistema de "enrutamiento" del lado del cliente. Cada página HTML principal tiene un atributo `data-page` en su etiqueta `<body>` (ej. `<body data-page="perfil">`). El archivo `script.js`, al cargarse, lee este atributo y utiliza una estructura `switch` para ejecutar únicamente las funciones de inicialización requeridas para esa página específica.

### Revisión de la Experiencia de Usuario Inicial (UX v2.0)

Tras la maquetación inicial, se ha decidido refinar la experiencia del primer contacto del usuario con la plataforma para centrarse inmediatamente en el contenido.

*   **Página de Inicio Centrada en el Contenido:** Se elimina la sección "hero" (el gran titular de bienvenida). La página `index.html` ahora mostrará directamente una selección de historias destacadas, sumergiendo al usuario en el catálogo desde el primer segundo.
*   **Barra de Noticias y Eventos:** En la parte superior de la página de inicio, se contempla un nuevo componente para anunciar concursos, eventos de la comunidad o noticias relevantes, fomentando la participación.
*   **Barra de Búsqueda Global:** La funcionalidad de búsqueda deja de ser exclusiva de la página "Explorar". La barra de búsqueda se integrará directamente en el **encabezado (`header`)**, permitiendo al usuario iniciar una búsqueda desde cualquier punto de la web, tal como esperan de una plataforma moderna.

### "Conocimiento Tribal" y Desafíos Inmediatos

- **Problemas de CSS y Caché:** Se experimentaron dificultades significativas con la memoria caché del navegador, que impedían ver los cambios de estilo. La solución estándar es siempre realizar una **Recarga Forzada (`Ctrl+F5` o `Cmd+Shift+R`)** antes de asumir un error en el código.
- **Evolución del Diseño:** El proyecto migró de un tema oscuro inicial a una identidad de marca de tema claro, más elegante y profesional. Los archivos actuales reflejan este nuevo diseño.
- **Próximo Gran Desafío (Backend):** La transición actual de una maqueta a una aplicación real. El siguiente paso crucial es dejar de usar datos de ejemplo (como las tarjetas de historias en el HTML) y empezar a leer y escribir desde la base de datos de Supabase. Esto implica:
    1.  Crear las tablas (`historias`, `capitulos`) en Supabase.
    2.  Modificar la página `explorar.html` para que obtenga la lista de historias desde la base de datos.
    3.  Construir los formularios que permitirán a los autores (una vez logueados) crear estas historias.

- **Reconstrucción del CSS (v5.0):** Tras encontrar numerosos conflictos de responsividad y diseño inconsistente, se tomó la decisión estratégica de reconstruir por completo el archivo `estilos.css`. La nueva versión (v5.0) se estructuró en 5 partes lógicas: Fundamentos, Estructura, Componentes, Páginas de Contenido y, finalmente, una sección unificada de Modo Oscuro y Responsividad. Este enfoque eliminó el código redundante y solucionó los problemas de layout en el `header` y los paneles de gestión en vistas móviles.


### Estrategia de Aplicación Móvil

La creación de una aplicación nativa se contempla como una fase avanzada del proyecto, posterior a la validación y crecimiento de la plataforma web. La estrategia se divide en tres etapas:

1.  **Etapa 1 (Actual): Perfeccionamiento de la Web Responsiva.** El objetivo principal es asegurar que la experiencia de usuario en navegadores móviles sea impecable, cubriendo todas las funcionalidades clave.
2.  **Etapa 2 (Post-Lanzamiento): Implementación de PWA (Progressive Web App).** Mejorar el sitio web actual para que sea "instalable" en la pantalla de inicio de los móviles, pueda funcionar offline y enviar notificaciones, ofreciendo una experiencia muy similar a una app nativa con un costo de desarrollo mucho menor.
3.  **Etapa 3 (Fase de Crecimiento): Desarrollo de la Aplicación Nativa.** Una vez que A.U.T.O.R. demuestre tener una base de usuarios activa y/o genere ingresos, se evaluará la contratación de un equipo o freelancer especializado para el desarrollo de las aplicaciones nativas para iOS y Android.

---

## Parte 2: El Plan de Acción Maestro

**FASE 0: Cimientos y Estrategia**
- [X] Misión 1: Preparar el terreno (Instalar software, crear cuentas).
- [X] Misión 2: Construir el taller digital (Conectar VS Code con GitHub).

**FASE 1: Maquetación y Diseño Visual**
- [X] Misión 3: Estructura Semántica y Navegación.
- [X] Misión 4: Página de Inicio Atractiva.
- [X] Misión 5: Página de Registro.
- [X] Misión 6: Página de Inicio de Sesión.
- [X] Misión 7: Página de Exploración.
- [X] Misión 8: Página de Detalle de Historia.
- [X] Misión 9: Página de Lectura del Capítulo.

**FASE 2: Interactividad del Lado del Cliente**
- [X] Misión 10: Menú Responsivo (Hamburguesa) con JS.
- [X] Misión 11: Validación del Formulario de Registro con JS.
- [X] Misión 12: Validación del Formulario de Login con JS.
- [X] Misión 13: Simulación de Sesión de Usuario con `localStorage`.

**FASE 3: Pulido del Front-End**
- [x] Misión 14: Mejorar la experiencia de usuario y el diseño visual (Tipografía, etc.).
- [x] Misión 15: Implementar Selector de Tema (Modo Claro/Oscuro).
    - [x] Añadir un interruptor en la UI (interfaz de usuario).
    - [x] Usar variables CSS para definir las paletas de colores de ambos temas.
    - [ ] Guardar la preferencia del usuario en `localStorage` para que su elección sea recordada.

**FASE 4: Backend y Base de Datos**
- [X] Misión 16: Elegir y configurar la tecnología Backend (Supabase).
- [X] Misión 17: Conectar el Front-End con Supabase (Instalar cliente y configurar claves API).
- [X] Misión 18: Implementar el registro de usuarios reales con Supabase Auth.
- [X] Misión 19: Implementar el inicio de sesión real y la gestión de sesión con Supabase.
- [x] Misión 20: Crear la página de Perfil de Usuario y mostrar datos.
- [x] Misión 21: Diseñar y crear las tablas de la base de datos (perfiles, historias, capitulos).
- [ ] Misión 22: Construir el Panel de Gestión de Contenido del Autor.
    - [x] **Sub-misión 22.1 (Evolucionar el Perfil):** Modificar la página `perfil.html` para que obtenga y muestre una lista de las historias creadas por el usuario que ha iniciado sesión. Cada historia en la lista será un enlace a su panel de gestión.
    - [x] **Sub-misión 22.2 (Crear la Estructura):** Crear el nuevo archivo `gestionar-historia.html` con la estructura HTML para: mostrar detalles de la historia, listar capítulos existentes y un formulario para añadir nuevos capítulos.
    - [x] **Sub-misión 22.3 (Dar Vida al Panel):** Implementar la lógica en `script.js` (`cargarPanelDeGestion`) para rellenar la página `gestionar-historia.html` con los datos correctos de la historia y sus capítulos desde Supabase.
    - [x] **Sub-misión 22.4 (Implementar Creación de Capítulos):** Conectar el formulario de "Añadir Nuevo Capítulo" a una función de JavaScript que guarde el nuevo capítulo en la base de datos.
    - [x] **Sub-misión 22.5 (Asegurar el Acceso):** Crear las políticas de seguridad RLS necesarias para permitir que un autor pueda `UPDATE` (actualizar) y `DELETE` (borrar) sus propias historias, y `INSERT` (añadir) capítulos solo a las historias que le pertenecen.
    - [X] **Sub-misión 22.6:** Implementar el borrado de capítulos.
- [X] Misión 23: Implementar Políticas de Seguridad a Nivel de Fila (RLS) para todas las tablas y operaciones, asegurando que los usuarios solo puedan modificar su propio contenido.

**FASE 4.5: Misión de Pulido Final (En Proceso)**
- [ ] Misión 24: Completar la funcionalidad del Perfil de Usuario.
    - [X] **Sub-misión 24.1:** Permitir la edición de `username` y `bio`.
    - [X] **Sub-misión 24.2:** Permitir la subida de un `avatar` de perfil a Supabase Storage.
    - [x] **Sub-misión 24.3:** Implementar el borrado de una historia completa (y sus capítulos asociados).
- [ ] Misión 25: Refinar la Experiencia de Usuario (UX).
    - [X] **Sub-misión 25.1:** Corregir el diseño de la barra de búsqueda en dispositivos móviles.
    - [x] **Sub-misión 25.2:** Añadir "Estadísticas a la Vista" en el panel de gestión (conteo de capítulos, palabras, etc.).
    - [x] **Misión 26:** Gestión de Portadas de Historias.

**FASE 5: El Gremio - El Mercado de Talentos**
- [x] Misión 27: Implementar perfiles de usuario con roles seleccionables (**Autor, Lector, Editor, Diseñador, Traductor, Crítico, Beta-Reader, etc**).
- [ ] **Misión Intermedia: La Bitácora del Creador (MVP)**
    - [ ] **Sub-misión A (Backend):** Crear la nueva tabla `bitacora` en Supabase. Deberá incluir columnas como `author_id`, `type` ('apunte' o 'articulo'), `title` (opcional), `content`, etc.
    - [ ] **Sub-misión B (Creación de Contenido):** Crear una nueva página de edición (`crear-entrada.html`) que pregunte al usuario qué tipo de entrada desea crear. La interfaz cambiará dinámicamente para mostrar un editor simple para "Apuntes" o uno con título para "Artículos".
    - [ ] **Sub-misión C (Visualización):** Añadir una pestaña "Bitácora" al perfil público. Al hacer clic, esta pestaña cargará y mostrará un feed con todas las entradas del usuario, diferenciando visualmente entre apuntes y artículos.
    - [ ] **Visión Futura para esta Misión:** Implementar la página de lectura dedicada para los artículos, añadir un sistema de "Seguimiento" de creadores y explorar la monetización por entrada.
- [ ] Misión 28: Construir un sistema de portafolios y de reseñas entre usuarios (ej. un autor reseña al editor).
- [ ] Misión 29: Implementar un sistema de búsqueda y filtros para encontrar colaboradores.
- [ ] Misión 30: Construir la mensajería interna.
- [ ] Misión 31: Implementar sistema de "contratos" simplificados y reparto de ganancias.

**FASE 6: El Ecosistema de Progreso y Comunidad**
- [ ] **Misión 32 (Hub Comunitario):**
    - [ ] Implementar un sistema de foros integrado con perfiles.
    - [ ] Permitir la inserción de contenido externo (YouTube, etc.) en los hilos.
- [ ] **Misión 33 (Sistema de Progreso Global):**
    - [ ] Diseñar y crear la base de datos para los Puntos de Experiencia (XP) y la Moneda Virtual.
    - [ ] **Árbol del Lector:** Implementar la lógica de ganancia de XP/Moneda (leer, comentar, etc.).
    - [ ] **Árbol del Creador (Autores/Gremio):** Implementar la lógica de ganancia de XP (publicar, recibir donaciones, completar trabajos).
- [ ] **Misión 34 (Economía Virtual):**
    - [ ] Construir la "tienda" para gastar monedas.
    - [ ] Implementar recompensas estéticas (marcos, insignias) y funcionales (comentarios destacados).
    - [ ] Construir la **Biblioteca Premium** (colecciones, notas) y su sistema de desbloqueo (pago y con monedas).

**FASE 7: Monetización (La Maquinaria de Ingresos)**
- [ ] Misión A (Pasarela de Pago): Integrar un procesador de pagos como Stripe o Mercado Pago. Esto es un requisito para todo lo demás.
- [ ] Misión B (Donaciones): Implementar la funcionalidad de donación directa al autor (en su perfil) y la micro-donación por párrafo.
- [ ] Misión C (Compra Directa): Construir la lógica para que un usuario pueda pagar para desbloquear una obra completa o un capítulo específico (el Paywall Flexible).
- [ ] Misión D (Suscripciones): Crear el sistema de suscripción mensual, gestionar los pagos recurrentes y los beneficios para suscriptores.
- [ ] Misión E (Publicidad): Esta suele ser una de las últimas fases. Integrar una red publicitaria (como Google AdSense) para mostrar anuncios a los usuarios no suscritos. Los ingresos se registran y se asocian a las obras leídas para el reparto de regalías.

**FASE 8: Internacionalización (Soporte Bilingüe)**
- [ ] Misión A (Traducción de la Interfaz - UI):
    - [ ] Crear archivos de idioma (`es.json`, `en.json`) para todo el texto estático.
    - [ ] Implementar un script que cambie el idioma de la UI dinámicamente.
    - [ ] Añadir un selector de idioma en el `header` o `footer`.
- [ ] Misión B (Soporte de Contenido Multilingüe):
    - [ ] Modificar la tabla `historias` en la base de datos para incluir un campo "idioma".
    - [ ] Actualizar la página "Explorar" para permitir filtrar historias por idioma.
- [ ] Misión C (Traducción Colaborativa - Integración con El Gremio):
    - [ ] Permitir que una obra tenga versiones enlazadas en diferentes idiomas.
    - [ ] Construir la funcionalidad para que un Autor pueda comisionar a un Traductor del Gremio para traducir su obra.

---

## Parte 3: El Estado Técnico

**Configuración Detallada del Backend (Supabase)**

Esta sección documenta el estado actual de la infraestructura en Supabase, diseñada para ser procesada y entendida por cualquier desarrollador o IA (como Gemini 2.5 Pro).

1. Estructura de la Base de Datos (Tablas y Relaciones)
La base de datos PostgreSQL se organiza en las siguientes tablas principales dentro del schema public:

Tabla: profiles
Propósito: Almacena los datos públicos y editables de los usuarios, extendiendo la información del sistema de autenticación.
Estructura de Columnas:
id (uuid, Primary Key): Clave primaria de la tabla.
updated_at (timestamptz): Marca de tiempo de la última actualización.
username (text): Nombre de usuario público y editable.
full_name (text, nullable): Nombre completo del usuario. (Actualmente no se utiliza en los formularios).
avatar_url (text, nullable): URL pública de la imagen de perfil alojada en Supabase Storage.
bio (text, nullable): Biografía del usuario.
Relaciones Clave (Foreign Keys):
La columna profiles.id tiene una relación de clave externa con auth.users.id. Esto es crítico y vincula cada perfil a un usuario de autenticación, garantizando la integridad de los datos.

Tabla: stories
Propósito: Almacena la información principal de cada obra o historia.
Estructura de Columnas:
id (bigint, Primary Key, Identity): Identificador numérico único y autoincremental de la historia.
created_at (timestamz): Marca de tiempo de creación.
title (text): Título de la historia.
synopsis (text): Resumen o sinopsis de la historia.
author_id (uuid): Clave externa que referencia a `profiles.id`, indicando el autor.
cover_image_url (text, nullable): URL de la imagen de portada.
genre (text, nullable): Género de la historia.
*Nota Crítica:* A diferencia de `profiles` y `chapters`, la clave primaria `id` de la tabla `stories` se configuró como `bigint` (serial) en lugar de `uuid`. Esta decisión impactó la creación de las políticas de seguridad de Storage, que tuvieron que ser adaptadas para convertir los nombres de archivo a `bigint` para su comparación.

Tabla: chapters
Propósito: Almacena el contenido de cada capítulo individual, vinculado a una historia.
Estructura de Columnas:
id (uuid, Primary Key): Identificador único del capítulo.
created_at (timestamz): Marca de tiempo de creación.
story_id (bigint): Clave externa que referencia a `stories.id`.
title (text): Título del capítulo.
content (text): Contenido principal del capítulo.
chapter_number (integer): Número de orden del capítulo.
status (text, default: 'borrador'): Estado del capítulo. Puede ser 'borrador' o 'publicado'.

2. Autenticación y Automatización (Triggers)

Se ha implementado un trigger a nivel de base de datos para asegurar que cada nuevo usuario tenga un perfil desde el momento de su registro.

Función: public.handle_new_user()
Disparador (Trigger): on_auth_user_created
Evento: Se ejecuta AFTER INSERT ON auth.users.
Acción: Cuando se crea un nuevo usuario en el sistema de autenticación, esta función se dispara e inserta automáticamente una nueva fila en public.profiles. La fila se rellena con el id, username y full_name extraídos de los metadatos del nuevo usuario. Esto es fundamental para que la lógica de "editar perfil" funcione correctamente desde el primer momento.

Código del Trigger:

create function public.handle_new_user()
returns trigger as $$
begin
  insert into public.profiles (id, username, full_name)
  values (new.id, new.raw_user_meta_data->>'username', new.raw_user_meta_data->>'full_name');
  return new;
end;
$$ language plpgsql security definer;

create trigger on_auth_user_created
  after insert on auth.users
  for each row execute procedure public.handle_new_user();

3. Almacenamiento de Archivos (Supabase Storage)

Se utilizan dos buckets públicos para gestionar los archivos subidos por los usuarios.

Bucket: `avatars`
Acceso: Público. Gestiona las imágenes de perfil de los usuarios. Las políticas de seguridad garantizan que cada usuario solo pueda gestionar (`INSERT`, `UPDATE`, `DELETE`) los archivos dentro de su propia carpeta, nombrada con su `user_id`.

Bucket: `covers`
Acceso: Público. Aloja las portadas de las historias. Se han implementado tres políticas de seguridad a nivel de fila para controlar el acceso:
-   **Política de INSERT (Subida):** Permite a un usuario autenticado subir un archivo solo si el nombre del archivo (sin extensión y convertido a `bigint`) coincide con el `id` de una historia de la cual es autor.
-   **Política de UPDATE (Actualización):** Permite a un usuario autenticado modificar un archivo existente bajo las mismas condiciones de propiedad que el INSERT.
-   **Política de SELECT (Lectura):** Permite el acceso de lectura público (`public`) a todos los archivos del bucket, para que las imágenes puedan ser mostradas en la web.

4. Políticas de Seguridad (Row Level Security - RLS)

RLS está activado en todas las tablas (`profiles`, `stories`, `chapters`) para garantizar un control de acceso granular y seguro.

Para la tabla `profiles`:
- **SELECT:** Pública. Cualquiera puede leer los perfiles.
- **UPDATE:** Un usuario solo puede actualizar su propio perfil (`auth.uid() = id`).

Para la tabla `stories`:
- **SELECT:** Pública. Cualquiera puede leer las historias.
- **INSERT:** Solo usuarios autenticados.
- **UPDATE / DELETE:** Solo el autor de la historia (`auth.uid() = author_id`).

Para la tabla `chapters`:
- **SELECT:** Cualquiera puede leer un capítulo si su `status` es 'publicado', O si el que lo lee es el autor de la historia (para permitirle ver sus borradores).
- **INSERT / UPDATE / DELETE:** Solo permitido si el `auth.uid()` del usuario coincide con el `author_id` de la historia a la que pertenece el capítulo (se logra mediante una subconsulta a la tabla `stories`).


- **Repositorio de GitHub:** [Pega aquí la URL de tu repositorio de GitHub]
- **Sitio de Pruebas en Netlify:** [Pega aquí la URL que te dio Netlify si decidiste publicar]

- **Estructura de Archivos:**
  proyecto-autor/
  ├── index.html
  ├── registro.html
  ├── login.html
  ├── explorar.html
  ├── historia.html
  ├── capitulo.html
  ├── confirmacion.html
  ├── perfil.html
  ├── gestionar-historia.html 
  ├── estilos.css
  ├── script.js
  └── Manual_AUTOR.md (Este mismo archivo)

- **Guía de Marca (Identidad Visual v2.0):**
  - **Paleta de Colores:**
    - **Fondo Principal:** Blanco Grisáceo (#DDDDDD)
    - **Texto Principal:** Negro Suave (#1a1a1a)
    - **Color de Acento:** Verde Esmeralda (#26DDC6)
    - **Color de Apoyo (Links, etc.):** Gris Oscuro (#333)
  - **Tipografía:**
    - **Títulos y Logo:** 'Playfair Display', serif
    - **Cuerpo de Texto y UI:** 'Roboto', sans-serif
    - **Texto de Lectura Larga:** 'Georgia', serif